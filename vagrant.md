# mission2021
2021년에 공부한 내용들을 문서로 저장하는 곳.
# 1. vagrant (2021.01.04 ~ 2021.01.10)
* 베이그런트는 가상화 소프트웨어 (버추얼박스, 도커 컨테이너, AWS 등)의 생성 및 유지보수를 위한 오픈소스 소프트웨어 제품
* 루비 언어로 작성됨

## 작업 LIST
### Box로 VM 생성하기 (CentOS, Ubuntu 등)
* 방법1) vagrant init bento/centos-7.4 명령어로 Vagrantfile을 생성 후 생성된 파일에 다음의 내용 작성 (Vagrantfile 위치는 처음 Vagrant를 설치한 위치)
```
Vagrant.configure("2") do |config|
  config.vm.box = "bento/centos-7.2"
  config.vm.box_version = "2.3.1"
end
```
(여기서 init 파일은 VM을 구동하기 위한 메타데이터 정보를 가지고 있음)
* 방법2) vagrant가 설치된 디렉토리 상위 폴더에 Vagrantfile을 직접 생성하여 작성 (*** TODO : 디렉토리 한번 확인해보기)
### VM 삭제
* 삭제 명령어 : ```vagrant box remove NAME``` 
* 예시 : TODO
### VM의 설정 변경
#### CORE
#### MEMORY
* 방법1)
1. 일단 box가 실행중이라면, ```vagrant halt``` 명령어를 통해 서버를 내린다.
2. 그리고 기존 Vagrantfile 에 다음의 내용을 작성한다. 
```
Vagrant.configure("2") do |config|

  config.vm.box = "bento/centos-7.2"
  config.vm.provider "virtualbox" do |vb|
     vb.cpus = "4"
     vb.memory = "4096"
  end

end
```
3. ```vagrant up``` 명령어로 서버를 다시 올린다.

  + TIP : 다음의 설정으로 gui 및 name등을 세팅할 수 있다.
```
config.vm.provider "virtualbox" do |v|
  v.gui = true 
  # 부팅되면서 gui 환경으로 부팅
  v.name = "my_vm"
  # VirtualBox GUI에서의 name을 세팅할 수 있음
end 
```
* 방법2) ```vagrant reload``` 명령어를 통해서도 Vagrantfile 수정 후 서버를 다시 올릴 수 있다.

#### DISK (중요)
* DISK에는 여러가지 옵션이 있음. (참고 : https://www.vagrantup.com/docs/disks/configuration) *** 정리할 게 좀 많을듯?

* disk types
disk (symbol)
dvd (symbol)
floppy (symbol)

```
config.vm.disk :disk, name: "backup", size: "10GB"
config.vm.disk :dvd, name: "installer", path: "./installer.iso"
config.vm.disk :floppy, name: "cool_files"
```


### 포트 포워딩

### SSH 접속
 * SSH 접속 Command : ```vagrant ssh``` 

### GITLAB 설치
### VM과 로컬 PC의 디렉토리 공유
### 네트워크 설정 변경
#### Private IP 설정
+TODO
```
Vagrant.configure("2") do |config|
  config.vm.network "private_network", type: "dhcp"
end
```
```
Vagrant.configure("2") do |config|
  config.vm.network "private_network", ip: "192.168.50.4"
end
```
#### DHCP 설정 (public)
```
Vagrant.configure("2") do |config|
  config.vm.network "public_network",
    use_dhcp_assigned_default_route: true
end
```
### Plugin 설치 및 사용
```
# Installing a plugin from a known gem source
$ vagrant plugin install my-plugin

# Installing a plugin from a local file source
$ vagrant plugin install /path/to/my-plugin.gem

# Usage plugin
# 플러그인의 사용법에 따라 달라질 수 있음
# (provisioners should be available via config.vm.provision, etc.)

# Removing a plugin from a known gem source
$ vagrant plugin uninstall my-plugin

# Updating plugin
$ vagrant plugin update NAME

# Listing plugin
$ vagrant plugin list
```

Note: In the future, the ```vagrant plugin``` command will include a subcommand that will document the components that each plugin installs.

### 기존 Box로 자체 신규 Box 만들기
* Linked clones are based on a master VM, which is generated by importing the base box only once the first time it is required. For the linked clones only differencing disk images are created where the parent disk image belongs to the master VM.
* master VM을 기준으로 기존 밗

```
config.vm.provider "virtualbox" do |v|
  v.linked_clone = true
end
```

### 신규 Box 파일을 웹 서버에 올려놓고 자체 Box 서버를 통해 Box 파일 내려받기
